#!/usr/bin/env bash
set -euo pipefail

# Apply home-manager configuration for the current Arch Linux host.
# Auto-detects user and hostname to pick the right flake target.

SCRIPT_DIR="$(cd "$(dirname "$0")" && pwd)"
FLAKE_DIR="$(cd "$SCRIPT_DIR/../.." && pwd)"

TARGET="${USER}@$(hostname)"

echo "==> Applying home-manager config for: ${TARGET}"
echo "    Flake: ${FLAKE_DIR}"

home-manager switch --flake "${FLAKE_DIR}#${TARGET}"
